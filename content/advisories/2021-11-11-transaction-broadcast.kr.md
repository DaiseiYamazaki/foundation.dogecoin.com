
+++
title = "주의보: 송금의 자동 재시도에 대한 답변"
date = "2021-11-11"
[ author ]
  name = "Dogecoin Foundation"
+++

추가사항: 해당 주의보의 이전 주의보 버전에서는 '우리'라는 단어를 이용하여 재단 와 분리되어 있는 다른 집단을 가리켰습니다. 이번 주의보 버전은 수정하여 이를 뚜렷하게 명시하도록 하였다. 

바이낸스에서 오늘 도지코인 출금을 정지시켰고 도지코인에 대한 "작은 결함"을 발견하였다고 한다. 도지코인 재단은 이에 대한 이야기를 하고자 한다:

몇 개월 전 (이전 주의보 버전에서 1년전이라고 작성했지만, 사실 확인된 첫 언급은 4월) 바이낸스는 도지코인 코어 관리자 집단에게 몇개의 송금이 막혔다는 것을 통지했으며, 이는 해당 송금들이 성공적으로 채굴이 되지 않고 있다는 뜻 이였다. 이에 도지코인 코어 관리인들이 바이낸스에게 해당 송금 트랜잭션에 대하여 RBF(replace by fee)를 이용함을 제안하였고 이는 기존의 송금 트랜잭션위에 더 높은 송금 수수료를 지불하는 새로운 송금 트랜잭션을 덮어쓰는 방식이다. 특히 이를 제안했던 이유는 RBF는 기존의 송금을 무효화하기 때문이다 (그렇기 때문에, “덮어쓰다”라는 용어를 이용한다). 해당 송금 트랜잭션이 RBG 비활성화 됨으로 인해, 바이낸스에게 새로운 트랜잭션을 수동적으로 만드는 것을 제안했다, 이는 동일한 입금내역을 소비함으로써 강제적으로 이전 송금 트랜잭션을 강제적으로 무효화할 수 있는 방식이다.

얼마 뒤, 바이낸스는 관리인들에게 계정 reconciliation 문제가 발생함을 통지했다. 관리인들은 바이낸스 측에서 제공한 데이터 이용하여 같은 문제를 재현하지 못하였지만, 그 당시에 바이낸스에게 `-zapwallettxes` 명령 라인 옵션을 이용하여 문제를 완화시킬 것을 제안했다. 이는 주목할 만하다 그 이유는 이를 이용함으로써 발생한 문제를 마찬가지로 방지할 수 있었을 것이라는 예상이 되기 때문이다.

어제 11월 10일 바이낸스는 관리인들에게 이전에 막혀 송금이 되고 있지 않았던 송금 트랜잭션들이 송금되었다는 것을 통지했다, 1.14.5 업데이트 이후; 이의 유력한 이유는 최소 송금 수수료가 1.14.5 업데이트와 함께 줄어들었기 때문으로, 이는 이전에 유효하지만 송출이 되지 않고 있던 트랜잭션을 송출 가능하게 끔 한다. 이의 유일하게 제공된 예시로 송금 트랜잭션의 송금 수수료가 v1.14.5에서 유효하지만, 1.14.3 그리고 이 보다 더 이전 노드 버전에서 무효한(너무 낮은) 트랜잭션. 바이낸스는 v1.14.3에서 1.14.5로 지난 몇 일 간에 바로 업데이트를 진해하였다.

현재 알 수 있는 정보를 통하여 이전에 막혀 있었던 송금 트랜잭션이 자동으로 재시도 된 것으로 보이며, 노드 업데이트후 재시작시에 발생한 것처럼 – 그리고 유효하게 트랜잭션이 진행되었다, 송금 최소 수수료가 낮아 졌기 때문에. 이는 수수료의 인하와 일치하는 동작이다.

## 교훈

* 막혀 있는 트랜잭션을 취소하기 위해서는 해당 트랜잭션의 input를 다른 트랜잭션에 이용함으로써 첫번째를 무효화 시킨다.
  * 가능한 replace-by-fee를 이용하라, 하지만 이전에 선택되었던 input를 이용하여 트랜잭션을 만들고 송출하는 것이 이전 트랜잭션을 무효화 시킬 수 있다.
* 일반적으로 막혀 있는 트랜잭션이 유효기간을 가지지 않는 것을 유의해야 하며, 일반적으로 메모리한계 때문에 제거된다.

## 안내

재단에서는 같은 문제에 대한 새로운 보고를 받지 못했다. 막혀 있는 무효한 트랜잭션에 대한 걱정하고 있는 provider, 우리는 노드를 정지시키고, mempool.dat 파일을 제거 후 `-zapwallettxes`로 노드 시작하는 것을 추천한다. 

걱정이 있는 개인들, 가지고 있는 모든 도지코인을 본인에게 다시 송금하는 것 또한(이상적으로 본인 소유의 새로운 입금 주소, 하지만 기존 주소도 이용 가능하다) 이전에 막혀 있던 트랜잭션 input을 소비하게 되어 막혀 있는 트랜잭션을 무효화 시킬 것이다. 

